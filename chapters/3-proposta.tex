\chapter{A Proposta}
A ideia do trabalho é unir as funcionalidades do METAR-TAF com o AISWEB
em uma aplicação web que o usuário iniciante consiga usar sem dificuldades.

Pelo fato de aviação necessitar ter um ambiente seguro e bastante regulado, considerando
que meu projeto é apenas um protótipo, prefiro restringir o caso de uso apenas
para jogadores de simuladores de voo que desejam que a simulação seja parecida
com o real. Nas páginas do sistema conterá um aviso de que o sistema \textbf{"não
deve ser usado para um voo real"}.

Dito isto, o sistema possui backend escrito na linguagem Python, fazendo uso da 
framework FastAPI. Até a entrega do Projeto I, o backend era feito com Flask. 
A escolha foi feita pela minha familiaridade com a framework. Porém, depois, 
descobri a framework FastAPI no meu trabalho. Normalmente, ela não é usada para fullstack, mas 
sim para fazer APIs REST, que retornam JSON na resposta de uma requisição. Um 
frontend feito em alguma framework de JavaScript faria a requisição e atualizaria a página
a partir dos dados recebidos.

Contudo, é possível retornar qualquer tipo de dado no FastAPI, inclusive páginas HTML. 
Como prefiro fazer a renderização de páginas no lado do servidor, continuei usando 
a funcionalidade de templates do Jinja2.

A substituição da framework deu-se pelos seguintes motivos:

\begin{itemize}
\item Projeto mais maduro, continuamente mantido.
\item Documentação bem mais detalhada do que a do Flask, com vários tutoriais sobre assuntos comumente usados, como autenticação e sessão de usuário.
\item Servidor embutido (Uvicorn) extremamente fácil de configurar e suficiente para produção \cite{fast-api-prod}.
No Flask é necessário configurar alguns parâmtros para o Guinicorn via o arquivo "gunicorn\_config.py".
\item Assíncrono, permitindo o uso junto com bibliotecas que utilizam asyncio.
No Flask, para paralelismo, é necessário usar uma biblioteca como o Gevent.
\end{itemize}

No segundo semestre de 2023 comecei a fazer este projeto para uso próprio.
O código está disponível em \url{https://github.com/antenor-z/aero}. Atualmente o
projeto funciona, mas a arquitetura foi feita sem muito planejamento, as
informações do aeroporto são hardcoded.

O usuário tem acesso a informações de frequência da torre, solo, tráfego, rampa
e operações, bem como das frequências e dados para VOR (um sistema de radionavegação
por antenas no solo), ILS (sistema de pouso por instrumentos) e informações
de pista. Neste trabalho quero, armazenar estas
em um banco de dados relacional com uma arquitetura bem planejada. Farei testes
de desempenho simulando uma alta taxa de acesso e, dependendo dos resultados,
fazer uso de um banco em memória como intermediário. 

Os aeródromos podem, ao longo do tempo, mudarem alguma frequência e outras
informações, como o número da pista, que muda a depender da variação do norte magnético,
uma ampliação da pista faz a informação de comprimento precisar ser alterada...

O código precisava ser alterado para atualizar estas informações.
É implementado um sistema administrativo no site, com uma autenticação por
senha e TOTP, para que seja possível mudar qualquer informação no banco mesmo
por pessoas que não saibam programar.

Esta parte administrativa, possui controle de permissões. Ao criar uma
conta, eu informo quais aeroportos esta conta pode alterar. Também posso
dizer que esta é uma conta "super" que pode alterar todos os aeroportos
e também criar e apagar um aeroporto.

Através de uma API do serviço americano National Weather Service, são coletadas 
as informações atuais de meteorologia. Estas informações (que vêm em um formato
chamado METAR) são processadas pelo backend e mostradas ao usuário de uma forma 
fácil de entender. Esta parte em específico possuia um código de difícil manutenção.
Foi refatorada esta parte e adicionado suporte para a maior parte de códigos
da especificação do METAR.

Ao longo do tempo, acessava o site, e caso visse alguma parte do METAR sem explicação,
adicionava no algorítmo. Atualmente todas as informações são explicadas para
os aeródromos brasileiros. Mais informações no capítulo de "Decodificação do METAR".
